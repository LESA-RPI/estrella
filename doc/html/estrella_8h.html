<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>estrella: src/lib/estrella.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>src/lib/estrella.h File Reference</h1>Public driver interface. <a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structestrella__usbdev__t.html">estrella_usbdev_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structestrella__dev__t.html">estrella_dev_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structestrella__session__t.html">estrella_session_t</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="87d8bee6352c83cc0381abd8e5c5f412"></a><!-- doxytag: member="estrella.h::ESTRELLA_PATH_MAX" ref="87d8bee6352c83cc0381abd8e5c5f412" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRELLA_PATH_MAX</b>&nbsp;&nbsp;&nbsp;(256)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1ab89f96b987415642884254548cb56e"></a><!-- doxytag: member="estrella.h::ESTROK" ref="1ab89f96b987415642884254548cb56e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTROK</b>&nbsp;&nbsp;&nbsp;(0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c4a4677ab36fec782248b7e92aca416c"></a><!-- doxytag: member="estrella.h::ESTRERR" ref="c4a4677ab36fec782248b7e92aca416c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRERR</b>&nbsp;&nbsp;&nbsp;(1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8d31ef32d3210d0722e5b8904850b982"></a><!-- doxytag: member="estrella.h::ESTRINV" ref="8d31ef32d3210d0722e5b8904850b982" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRINV</b>&nbsp;&nbsp;&nbsp;(2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6df77279358e710acfd3c84706fc1815"></a><!-- doxytag: member="estrella.h::ESTRNOMEM" ref="6df77279358e710acfd3c84706fc1815" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRNOMEM</b>&nbsp;&nbsp;&nbsp;(3)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="730b6f0ffd878fc1d04b08650ccf1734"></a><!-- doxytag: member="estrella.h::ESTRTIMEOUT" ref="730b6f0ffd878fc1d04b08650ccf1734" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRTIMEOUT</b>&nbsp;&nbsp;&nbsp;(4)</td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#b43becb43529d23b80350b7ed4787e01">estr_xtmode_t</a> { <br>
&nbsp;&nbsp;<b>ESTR_XTMODE_NORMAL</b> =  (0), 
<br>
&nbsp;&nbsp;<b>ESTR_XTMODE_TRIGGER</b>, 
<br>
&nbsp;&nbsp;<b>ESTR_XTMODE_TYPES</b>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#10245e0bad33141b33feeadd78cb852f">estr_xsmooth_t</a> { <br>
&nbsp;&nbsp;<b>ESTR_XSMOOTH_NONE</b> =  (0), 
<br>
&nbsp;&nbsp;<b>ESTR_XSMOOTH_5PX</b>, 
<br>
&nbsp;&nbsp;<b>ESTR_XSMOOTH_9PX</b>, 
<br>
&nbsp;&nbsp;<b>ESTR_XSMOOTH_17PX</b>, 
<br>
&nbsp;&nbsp;<b>ESTR_XSMOOTH_33PX</b>, 
<br>
&nbsp;&nbsp;<b>ESTR_XSMOOTH_TYPES</b>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#08485e44c5331ad6039da979fd357909">estr_tempcomp_t</a> { <br>
&nbsp;&nbsp;<b>ESTR_TEMPCOMP_OFF</b> =  (0), 
<br>
&nbsp;&nbsp;<b>ESTR_TEMPCOMP_ON</b>, 
<br>
&nbsp;&nbsp;<b>ESTR_TEMPCOMP_TYPES</b>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#d961eae1be381cfd9f87f556c9940b6f">estr_xtrate_t</a> { <br>
&nbsp;&nbsp;<b>ESTR_XRES_LOW</b> =  (0), 
<br>
&nbsp;&nbsp;<b>ESTR_XRES_MEDIUM</b>, 
<br>
&nbsp;&nbsp;<b>ESTR_XRES_HIGH</b>, 
<br>
&nbsp;&nbsp;<b>ESTR_XRES_TYPES</b>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#81b17e2fedb6029889e010cf4155042a">estrella_devicetype_t</a> { <br>
&nbsp;&nbsp;<b>ESTRELLA_DEV_USB</b>, 
<br>
&nbsp;&nbsp;<b>ESTRELLA_DEV_LPT</b>
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#58c73abcd3e073bb43e314fa66e7874b">estrella_find_devices</a> (dll_list_t *devices)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#e91955add960d444de84774683f67b1d">estrella_num_devices</a> (int *num)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#b6e266423f77984b2aa198778070fe7a">estrella_get_device</a> (<a class="el" href="structestrella__dev__t.html">estrella_dev_t</a> *dev, int num)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#c2bea81643fac63eb0a821f70a123a40">estrella_init</a> (<a class="el" href="structestrella__session__t.html">estrella_session_t</a> *session, <a class="el" href="structestrella__dev__t.html">estrella_dev_t</a> *dev)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#d84f7aaad7e80a6e8ba366f2972e1305">estrella_close</a> (<a class="el" href="structestrella__session__t.html">estrella_session_t</a> *session)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#f6c99a18f9e4f10cbbeb10581c3b3c88">estrella_rate</a> (<a class="el" href="structestrella__session__t.html">estrella_session_t</a> *session, int rate, <a class="el" href="estrella_8h.html#d961eae1be381cfd9f87f556c9940b6f">estr_xtrate_t</a> xtrate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#2646d00473f09899c738eeb49a26d4bd">estrella_mode</a> (<a class="el" href="structestrella__session__t.html">estrella_session_t</a> *session, <a class="el" href="estrella_8h.html#b43becb43529d23b80350b7ed4787e01">estr_xtmode_t</a> xtmode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#b59e11b58f809ce477bb57020a24c8bd">estrella_scan</a> (<a class="el" href="structestrella__session__t.html">estrella_session_t</a> *session, float *buffer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#ca45e90b2f8a4af30b4e2c58e0aff809">estrella_update</a> (<a class="el" href="structestrella__session__t.html">estrella_session_t</a> *session, int scanstoavg, <a class="el" href="estrella_8h.html#10245e0bad33141b33feeadd78cb852f">estr_xsmooth_t</a> xsmooth, <a class="el" href="estrella_8h.html#08485e44c5331ad6039da979fd357909">estr_tempcomp_t</a> tempcomp)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Public driver interface. 
<p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="b43becb43529d23b80350b7ed4787e01"></a><!-- doxytag: member="estrella.h::estr_xtmode_t" ref="b43becb43529d23b80350b7ed4787e01" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="estrella_8h.html#b43becb43529d23b80350b7ed4787e01">estr_xtmode_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Estrella operation modes <div class="fragment"><pre class="fragment"><a name="l00079"></a>00079              {
<a name="l00080"></a>00080     ESTR_XTMODE_NORMAL    = (0),
<a name="l00081"></a>00081     ESTR_XTMODE_TRIGGER,
<a name="l00082"></a>00082     ESTR_XTMODE_TYPES,
<a name="l00083"></a>00083 } <a class="code" href="estrella_8h.html#b43becb43529d23b80350b7ed4787e01">estr_xtmode_t</a>;
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="10245e0bad33141b33feeadd78cb852f"></a><!-- doxytag: member="estrella.h::estr_xsmooth_t" ref="10245e0bad33141b33feeadd78cb852f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="estrella_8h.html#10245e0bad33141b33feeadd78cb852f">estr_xsmooth_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Estrella xsmoothing setting <div class="fragment"><pre class="fragment"><a name="l00086"></a>00086              {
<a name="l00087"></a>00087     ESTR_XSMOOTH_NONE     = (0),
<a name="l00088"></a>00088     ESTR_XSMOOTH_5PX,
<a name="l00089"></a>00089     ESTR_XSMOOTH_9PX,
<a name="l00090"></a>00090     ESTR_XSMOOTH_17PX,
<a name="l00091"></a>00091     ESTR_XSMOOTH_33PX,
<a name="l00092"></a>00092     ESTR_XSMOOTH_TYPES,
<a name="l00093"></a>00093 } <a class="code" href="estrella_8h.html#10245e0bad33141b33feeadd78cb852f">estr_xsmooth_t</a>;
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="08485e44c5331ad6039da979fd357909"></a><!-- doxytag: member="estrella.h::estr_tempcomp_t" ref="08485e44c5331ad6039da979fd357909" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="estrella_8h.html#08485e44c5331ad6039da979fd357909">estr_tempcomp_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Estrella temperature compensation <div class="fragment"><pre class="fragment"><a name="l00096"></a>00096              {
<a name="l00097"></a>00097     ESTR_TEMPCOMP_OFF     = (0),
<a name="l00098"></a>00098     ESTR_TEMPCOMP_ON,
<a name="l00099"></a>00099     ESTR_TEMPCOMP_TYPES,
<a name="l00100"></a>00100 } <a class="code" href="estrella_8h.html#08485e44c5331ad6039da979fd357909">estr_tempcomp_t</a>;
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d961eae1be381cfd9f87f556c9940b6f"></a><!-- doxytag: member="estrella.h::estr_xtrate_t" ref="d961eae1be381cfd9f87f556c9940b6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="estrella_8h.html#d961eae1be381cfd9f87f556c9940b6f">estr_xtrate_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Xtiming resolution parameters <div class="fragment"><pre class="fragment"><a name="l00103"></a>00103              {
<a name="l00104"></a>00104     ESTR_XRES_LOW         = (0),
<a name="l00105"></a>00105     ESTR_XRES_MEDIUM,
<a name="l00106"></a>00106     ESTR_XRES_HIGH,
<a name="l00107"></a>00107     ESTR_XRES_TYPES,
<a name="l00108"></a>00108 } <a class="code" href="estrella_8h.html#d961eae1be381cfd9f87f556c9940b6f">estr_xtrate_t</a>;
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="81b17e2fedb6029889e010cf4155042a"></a><!-- doxytag: member="estrella.h::estrella_devicetype_t" ref="81b17e2fedb6029889e010cf4155042a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="estrella_8h.html#81b17e2fedb6029889e010cf4155042a">estrella_devicetype_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates the device type.<p>
Spectrometers may be connected to the computer through USB or the parallel port. While at the moment this driver can only handle USB connected devices ist should be fairly easy to implement IEEE-1284 communications. Provided you know about the protocol being used. <div class="fragment"><pre class="fragment"><a name="l00116"></a>00116              {
<a name="l00117"></a>00117     ESTRELLA_DEV_USB,
<a name="l00118"></a>00118     ESTRELLA_DEV_LPT,
<a name="l00119"></a>00119 } <a class="code" href="estrella_8h.html#81b17e2fedb6029889e010cf4155042a">estrella_devicetype_t</a>;
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="58c73abcd3e073bb43e314fa66e7874b"></a><!-- doxytag: member="estrella.h::estrella_find_devices" ref="58c73abcd3e073bb43e314fa66e7874b" args="(dll_list_t *devices)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_find_devices           </td>
          <td>(</td>
          <td class="paramtype">dll_list_t *&nbsp;</td>
          <td class="paramname"> <em>devices</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find devices connected to the host<p>
If necessary initialization (namely firmware loading) is being performed transparently. This function gives us a set of <a class="el" href="structestrella__dev__t.html">estrella_dev_t</a> items, which we can use to create sessions using <a class="el" href="estrella_8h.html#c2bea81643fac63eb0a821f70a123a40">estrella_init()</a>.<p>
Note that if no devices are found the returned list is empty but the function call returns no errors.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>devices</em>&nbsp;</td><td>An initialized dll_list_t instance which is to be populated with found devices.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRERR Device discovery failed </dd></dl>

</div>
</div><p>
<a class="anchor" name="e91955add960d444de84774683f67b1d"></a><!-- doxytag: member="estrella.h::estrella_num_devices" ref="e91955add960d444de84774683f67b1d" args="(int *num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_num_devices           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>num</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find out about the number of spectrometer devices in the system<p>
This function basically just calls <a class="el" href="estrella_8h.html#58c73abcd3e073bb43e314fa66e7874b">estrella_find_devices()</a> and returns the size of the list. It's provided for convenience in environments where it's difficult to handle dll_list_t items. In regular C/C++ code we should be using <a class="el" href="estrella_8h.html#58c73abcd3e073bb43e314fa66e7874b">estrella_find_devices()</a> to minimize overhead.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>Returns the number of devices found</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV Invalid parameter <p>
ESTRERR Device scan failed </dd></dl>

</div>
</div><p>
<a class="anchor" name="b6e266423f77984b2aa198778070fe7a"></a><!-- doxytag: member="estrella.h::estrella_get_device" ref="b6e266423f77984b2aa198778070fe7a" args="(estrella_dev_t *dev, int num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_get_device           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structestrella__dev__t.html">estrella_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get a device<p>
Like <a class="el" href="estrella_8h.html#e91955add960d444de84774683f67b1d">estrella_num_devices()</a> this is just a convenience function. It calls <a class="el" href="estrella_8h.html#58c73abcd3e073bb43e314fa66e7874b">estrella_find_devices()</a> under the hood and returns device 'num' from the list.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Pointer to an estrella_device_t struct which is to be populated with device information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>The requested device number</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV Invalid parameter <p>
ESTRERR Device not found </dd></dl>

</div>
</div><p>
<a class="anchor" name="c2bea81643fac63eb0a821f70a123a40"></a><!-- doxytag: member="estrella.h::estrella_init" ref="c2bea81643fac63eb0a821f70a123a40" args="(estrella_session_t *session, estrella_dev_t *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structestrella__session__t.html">estrella_session_t</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structestrella__dev__t.html">estrella_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize a session on a device<p>
'Session' is pretty much what 'channel' is for the windows driver. At least in our case we can get some basic info about the device we're dealing with prior to binding it to a session. This is not the case for the windows driver I believe.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>A pointer to an <a class="el" href="structestrella__session__t.html">estrella_session_t</a> which is to be initialized </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Device to be used in this session</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRERR Could not create a session for this device <p>
ESTRNOMEM Couldn't create session due to lack of memory </dd></dl>

</div>
</div><p>
<a class="anchor" name="d84f7aaad7e80a6e8ba366f2972e1305"></a><!-- doxytag: member="estrella.h::estrella_close" ref="d84f7aaad7e80a6e8ba366f2972e1305" args="(estrella_session_t *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_close           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structestrella__session__t.html">estrella_session_t</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy a session<p>
Be nice and destroy the session when we're done using it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>Session to be destroyed</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV The supplied session handle is invalid <p>
ESTRERR Session could not be destroyed </dd></dl>

</div>
</div><p>
<a class="anchor" name="f6c99a18f9e4f10cbbeb10581c3b3c88"></a><!-- doxytag: member="estrella.h::estrella_rate" ref="f6c99a18f9e4f10cbbeb10581c3b3c88" args="(estrella_session_t *session, int rate, estr_xtrate_t xtrate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_rate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structestrella__session__t.html">estrella_session_t</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="estrella_8h.html#d961eae1be381cfd9f87f556c9940b6f">estr_xtrate_t</a>&nbsp;</td>
          <td class="paramname"> <em>xtrate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set integration time and timing resolution clock rate<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rate</em>&nbsp;</td><td>Detector integration rate in ms (2-65500) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xtrate</em>&nbsp;</td><td>ESTR_XRES_LOW/MEDIUM/HIGH. ESTR_XRES_HIGH is the slowest but provides the highest resolution. According to the manufacturer we should be using integration times &gt;30ms when operating in medium or high resolution mode. In fact we should be fine with only 15ms in normal resolution mode. This has got to to with the clock slowdown in higher resolution modes and the way data is being pushed out of the ccd array. Have a look at the data sheet for details.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV A supplied input argument is invalid <p>
ESTRERR Could not set rate </dd></dl>

</div>
</div><p>
<a class="anchor" name="2646d00473f09899c738eeb49a26d4bd"></a><!-- doxytag: member="estrella.h::estrella_mode" ref="2646d00473f09899c738eeb49a26d4bd" args="(estrella_session_t *session, estr_xtmode_t xtmode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_mode           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structestrella__session__t.html">estrella_session_t</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="estrella_8h.html#b43becb43529d23b80350b7ed4787e01">estr_xtmode_t</a>&nbsp;</td>
          <td class="paramname"> <em>xtmode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the mode of operation<p>
In normal operation mode <a class="el" href="estrella_8h.html#b59e11b58f809ce477bb57020a24c8bd">estrella_scan()</a> will return ESTRTIMEOUT if it does not receive any reply from the spectrometer device in time. When controlling operations using a trigger input estrella will wait until it receives any data from the device, no matter how long that might take.<p>
The manufacturer's documentation on this topic is rather sparse. This is what I know:<ul>
<li>Setting rate and xtrate works as usual</li><li>The spectormeter triggers with the rising edge (TTL level)</li><li>The trigger pulse's high slope should be no shorter than 1ms</li><li>With every trigger pulse the spectrometer will start scanning and return the results</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xtmode</em>&nbsp;</td><td>ESTR_XTMODE_NORMAL: Normal operation, ESTR_XTMODE_TRIGGER: External trigger</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV A supplied input argument is invalid </dd></dl>

</div>
</div><p>
<a class="anchor" name="b59e11b58f809ce477bb57020a24c8bd"></a><!-- doxytag: member="estrella.h::estrella_scan" ref="b59e11b58f809ce477bb57020a24c8bd" args="(estrella_session_t *session, float *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_scan           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structestrella__session__t.html">estrella_session_t</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&nbsp;</td>
          <td class="paramname"> <em>buffer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Acquire a spectral scan<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Array of float, 2051 elements wide</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV A supplied input argument is invalid <p>
ESTRTIMEOUT Scan timed out (in normal operations mode) <p>
ESTRERR Scan failed </dd></dl>

</div>
</div><p>
<a class="anchor" name="ca45e90b2f8a4af30b4e2c58e0aff809"></a><!-- doxytag: member="estrella.h::estrella_update" ref="ca45e90b2f8a4af30b4e2c58e0aff809" args="(estrella_session_t *session, int scanstoavg, estr_xsmooth_t xsmooth, estr_tempcomp_t tempcomp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_update           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structestrella__session__t.html">estrella_session_t</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>scanstoavg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="estrella_8h.html#10245e0bad33141b33feeadd78cb852f">estr_xsmooth_t</a>&nbsp;</td>
          <td class="paramname"> <em>xsmooth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="estrella_8h.html#08485e44c5331ad6039da979fd357909">estr_tempcomp_t</a>&nbsp;</td>
          <td class="paramname"> <em>tempcomp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set data processing configuration<p>
TODO: xsmoothing and temperature compensation have not yet been implemented<p>
session Session <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>scanstoavg</em>&nbsp;</td><td>Scans to perform and average (1-99) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xsmooth</em>&nbsp;</td><td>Smoothing. For possible values have a look at ESTR_XSMOOTH* </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tempcomp</em>&nbsp;</td><td>Temperature compensation. ESTR_TEMPCOMP_OFF or ESTR_TEMPCOMP_ON</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV A supplied input argument is invalid </dd></dl>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Apr 1 12:49:35 2009 for estrella by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>estrella: src/lib/estrella.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>src/lib/estrella.h File Reference</h1>Public driver interface. <a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structestrella__usbdev__t.html">estrella_usbdev_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structestrella__dev__t.html">estrella_dev_t</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="87d8bee6352c83cc0381abd8e5c5f412"></a><!-- doxytag: member="estrella.h::ESTRELLA_PATH_MAX" ref="87d8bee6352c83cc0381abd8e5c5f412" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRELLA_PATH_MAX</b>&nbsp;&nbsp;&nbsp;(256)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1ab89f96b987415642884254548cb56e"></a><!-- doxytag: member="estrella.h::ESTROK" ref="1ab89f96b987415642884254548cb56e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTROK</b>&nbsp;&nbsp;&nbsp;(0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c4a4677ab36fec782248b7e92aca416c"></a><!-- doxytag: member="estrella.h::ESTRERR" ref="c4a4677ab36fec782248b7e92aca416c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRERR</b>&nbsp;&nbsp;&nbsp;(1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8d31ef32d3210d0722e5b8904850b982"></a><!-- doxytag: member="estrella.h::ESTRINV" ref="8d31ef32d3210d0722e5b8904850b982" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRINV</b>&nbsp;&nbsp;&nbsp;(2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6df77279358e710acfd3c84706fc1815"></a><!-- doxytag: member="estrella.h::ESTRNOMEM" ref="6df77279358e710acfd3c84706fc1815" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRNOMEM</b>&nbsp;&nbsp;&nbsp;(3)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="730b6f0ffd878fc1d04b08650ccf1734"></a><!-- doxytag: member="estrella.h::ESTRTIMEOUT" ref="730b6f0ffd878fc1d04b08650ccf1734" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ESTRTIMEOUT</b>&nbsp;&nbsp;&nbsp;(4)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#81b17e2fedb6029889e010cf4155042a">estrella_devicetype_t</a> { <br>
&nbsp;&nbsp;<b>ESTRELLA_DEV_USB</b>, 
<br>
&nbsp;&nbsp;<b>ESTRELLA_DEV_LPT</b>
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#58c73abcd3e073bb43e314fa66e7874b">estrella_find_devices</a> (dll_list_t *devices)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#e8894fb93f05b6668a77afde11387c1e">estrella_init</a> (<a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a> *session, <a class="el" href="structestrella__dev__t.html">estrella_dev_t</a> *dev)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#a542fe97797b954a06fbbf195be9a773">estrella_close</a> (<a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a> session)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#21f1e7d43347ab0a19d2357eefa1f82b">estrella_rate</a> (<a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a> session, int rate, int xtrate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#0be929e5d969ca085921bbff8da5de84">estrella_scan</a> (<a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a> session, float *buffer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="estrella_8h.html#4ad4d38b49995a8c473c1620f92dd6da">estrella_update</a> (<a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a> session, int scanstoavg, int xsmooth, int tempcomp)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Public driver interface. 
<p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="9e32a165a0a3e6f6d73703996069c045"></a><!-- doxytag: member="estrella.h::estrella_session_handle_t" ref="9e32a165a0a3e6f6d73703996069c045" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Session handle.<p>
Used by the client to identify his session. 
</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="81b17e2fedb6029889e010cf4155042a"></a><!-- doxytag: member="estrella.h::estrella_devicetype_t" ref="81b17e2fedb6029889e010cf4155042a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="estrella_8h.html#81b17e2fedb6029889e010cf4155042a">estrella_devicetype_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates the device type.<p>
Spectrometers may be connected to the computer through USB or the parallel port. While at the moment this driver can only handle USB connected devices ist should be fairly easy to implement LPT communications. Provided you know about the protocol of course. <div class="fragment"><pre class="fragment"><a name="l00081"></a>00081              {
<a name="l00082"></a>00082     ESTRELLA_DEV_USB,
<a name="l00083"></a>00083     ESTRELLA_DEV_LPT,
<a name="l00084"></a>00084 } <a class="code" href="estrella_8h.html#81b17e2fedb6029889e010cf4155042a">estrella_devicetype_t</a>;
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="58c73abcd3e073bb43e314fa66e7874b"></a><!-- doxytag: member="estrella.h::estrella_find_devices" ref="58c73abcd3e073bb43e314fa66e7874b" args="(dll_list_t *devices)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_find_devices           </td>
          <td>(</td>
          <td class="paramtype">dll_list_t *&nbsp;</td>
          <td class="paramname"> <em>devices</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find devices connected to the host<p>
If necessary initialization (namely firmware loading) is being performed transparently. This function gives you a set of <a class="el" href="structestrella__dev__t.html">estrella_dev_t</a> items, which you can use to create sessions using <a class="el" href="estrella_8h.html#e8894fb93f05b6668a77afde11387c1e">estrella_init()</a>.<p>
Note that if no devices are found the returned list is empty but the function call returns no errors.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>devices</em>&nbsp;</td><td>An initialized dll_list_t instance which is to be populated with found devices.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRERR Device discovery failed </dd></dl>

</div>
</div><p>
<a class="anchor" name="e8894fb93f05b6668a77afde11387c1e"></a><!-- doxytag: member="estrella.h::estrella_init" ref="e8894fb93f05b6668a77afde11387c1e" args="(estrella_session_handle_t *session, estrella_dev_t *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structestrella__dev__t.html">estrella_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize a session on a device<p>
Session is pretty much what the original driver means with "channel". This implementation provides the advantage though that you actually know which device you're talking to. In case of USB you get the vendor and product id.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>Returns a handle to a freshly initialized session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Device to be used in this session</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRERR Could not create a session for this device <p>
ESTRNOMEM Couldn't create session due to lack of memory </dd></dl>

</div>
</div><p>
<a class="anchor" name="a542fe97797b954a06fbbf195be9a773"></a><!-- doxytag: member="estrella.h::estrella_close" ref="a542fe97797b954a06fbbf195be9a773" args="(estrella_session_handle_t session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_close           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a>&nbsp;</td>
          <td class="paramname"> <em>session</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy a session<p>
It's pretty much vital to call this function when you're done using a session. All resources are being freed here.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>Session to be destroyed</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV The supplied session handle is invalid <p>
ESTRERR Session could not be destroyed </dd></dl>

</div>
</div><p>
<a class="anchor" name="21f1e7d43347ab0a19d2357eefa1f82b"></a><!-- doxytag: member="estrella.h::estrella_rate" ref="21f1e7d43347ab0a19d2357eefa1f82b" args="(estrella_session_handle_t session, int rate, int xtrate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_rate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a>&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xtrate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set integration time and timing resolution clock rate<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rate</em>&nbsp;</td><td>Detector integration rate in ms (2-65500) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xtrate</em>&nbsp;</td><td>0-2, where 2 is the slowest but provides the highest resolution</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV A supplied input argument is invalid <p>
ESTRERR Could not set rate </dd></dl>

</div>
</div><p>
<a class="anchor" name="0be929e5d969ca085921bbff8da5de84"></a><!-- doxytag: member="estrella.h::estrella_scan" ref="0be929e5d969ca085921bbff8da5de84" args="(estrella_session_handle_t session, float *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_scan           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a>&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&nbsp;</td>
          <td class="paramname"> <em>buffer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Acquire a spectral scan<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Array of float, 2051 elements wide</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV A supplied input argument is invalid <p>
ESTRTIMEOUT Scan timed out <p>
ESTRERR Scan failed </dd></dl>

</div>
</div><p>
<a class="anchor" name="4ad4d38b49995a8c473c1620f92dd6da"></a><!-- doxytag: member="estrella.h::estrella_update" ref="4ad4d38b49995a8c473c1620f92dd6da" args="(estrella_session_handle_t session, int scanstoavg, int xsmooth, int tempcomp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int estrella_update           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="estrella_8h.html#9e32a165a0a3e6f6d73703996069c045">estrella_session_handle_t</a>&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>scanstoavg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xsmooth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tempcomp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set data processing configuration<p>
TODO: xsmoothing and temperature compensation have not yet been implemented<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>scanstoavg</em>&nbsp;</td><td>Scans to perform and average (1-99) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xsmooth</em>&nbsp;</td><td>(0=none, 1=5px, 2=9px, 3=17px, 4=33px) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tempcomp</em>&nbsp;</td><td>0=off, 1=on</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ESTROK No errors occured <p>
ESTRINV A supplied input argument is invalid </dd></dl>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Feb 26 21:37:42 2009 for estrella by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
